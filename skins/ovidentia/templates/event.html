
<!--#begin newevent -->

<form name="vacform" method="post" action="{ babPhpSelf }" onsubmit="return(submitCtrl(this,'vacform'))" >
<input type="hidden" name="tg" value="event" />
<input type="hidden" name="idx" value="addevent" />
<input type="hidden" name="date" value="{ curdate }" />
<input type="hidden" name="view" value="{ curview }" />
<input type="hidden" name="curcalids" value="{ calid }" />
<input type="hidden" name="action" value="addevent" />
<input type="hidden" name="avariability" value="{ avariability }" />
<table class="BabLoginCadreBackground" width="90%" border="0" cellspacing="0" cellpadding="2" align="center">
<tr> 
<td> 
	<table class="BabLoginMenuBackground" width="100%" border="0" cellspacing="0" cellpadding="3">
	<tr id="avariability_check">
		<td colspan="2">
		{ avariability_message }<br />
		<ol>
			<!--#in getnextavariability -->
			<li>{ conflict }</li>
			<!--#endin getnextavariability -->
		</ol>
		<input type="submit" value="{ t_test_conflicts }" name="test_conflicts" /><br />
		</td>
	</tr>
	<tbody id="main_form">
	<tr> 
		<td align="right">
			<a class="BabEventFaqLink" href="javascript: Start('{ datebeginurl }', 'CalendarWindow', 'width=250,height=250,status=no,resizable=no,top=200,left=200');">{ datebegintxt }</a>:
		</td>
		<td nowrap> 
			<select name="daybegin">
			<!--#in getnextday -->
			<option value="{ dayid }" { selected }>{ dayid }</option>
			<!--#endin getnextday -->
			</select>

			<select name="monthbegin" onChange="updateDates(this.form.daybegin, this.form.monthbegin, this.form.yearbegin);">
			<!--#in getnextmonth -->
			<option value="{ monthid }" { selected }>{ monthname }</option>
			<!--#endin getnextmonth -->
			</select>

			<select name="yearbegin" onChange="updateDates(this.form.daybegin, this.form.monthbegin, this.form.yearbegin);">
			<!--#in getnextyear -->
			<option value="{ yearid }"  { selected }>{ yearidval }</option>
			<!--#endin getnextyear -->
			</select>

			<select name="timebegin">
			<!--#in getnexttime -->
			<option value="{ timeval }" { selected }>{ time }</option>
			<!--#endin getnexttime -->
			</select >
		</td>
	</tr>
	<tr> 
		<td align="right">
			<a class="BabEventFaqLink" href="javascript: Start('{ dateendurl }', 'CalendarWindow', 'width=250,height=250,status=no,resizable=no,top=200,left=200');">{ dateendtxt }</a>:
		</td>
		<td nowrap> 
			<select name="dayend">
			<!--#in getnextday -->
			<option value="{ dayid }" { selected }>{ dayid }</option>
			<!--#endin getnextday -->
			</select>

			<select name="monthend" onChange="updateDates(this.form.dayend, this.form.monthend, this.form.yearend);">
			<!--#in getnextmonth -->
			<option value="{ monthid }" { selected }>{ monthname }</option>
			<!--#endin getnextmonth -->
			</select>

			<select name="yearend" onChange="updateDates(this.form.dayend, this.form.monthend, this.form.yearend);">
			<!--#in getnextyear -->
			<option value="{ yearid }"  { selected }>{ yearidval }</option>
			<!--#endin getnextyear -->
			</select>

			<select name="timeend">
			<!--#in getnexttime -->
			<option value="{ timeval }" { selected }>{ time }</option>
			<!--#endin getnexttime -->
			</select >
		</td>
	</tr>
	<tr> 
		<td align="right"  width="40%">
			{ daytype }:<input type="checkbox" name="daytype" value="y" OnClick="daytypeswitch()" { daytypechecked } /></td>
		<td> 
			<script type="text/javascript">
			<!--
			function repeat_checkbox(obj)
				{

				if (obj.checked)
					{
					document.getElementById('repeat_tr').style.display = '';
					document.getElementById('repeat_enddate').style.display = '';
					}
				else
					{
					document.getElementById('repeat_tr').style.display = 'none';
					document.getElementById('repeat_enddate').style.display = 'none';
					}
				}
			-->
			</script>
			&nbsp;&nbsp;&nbsp;
			{ t_repeat }:<input type="checkbox" name="repeat_cb" value="1" onclick="repeat_checkbox(this)" { repeat_cb_checked } />
		</td>
	</tr>
	
	<tr id="repeat_tr"> 
		<td align="right" valign="top" nowrap>
			<label for="repeat_radio_1">{ t_daily }</label>
			<input type="radio" id="repeat_radio_1" name="repeat" value="1" onclick="repeat_switch(this)" /><br />
			<label for="repeat_radio_2">{ t_weekly }</label>
			<input type="radio" id="repeat_radio_2" name="repeat" value="2" onclick="repeat_switch(this)" /><br />
			<label for="repeat_radio_3">{ t_monthly }</label>
			<input type="radio" id="repeat_radio_3" name="repeat" value="3" onclick="repeat_switch(this)" /><br />
			<label for="repeat_radio_4">{ t_yearly }</label>
			<input type="radio" id="repeat_radio_4" name="repeat" value="4" onclick="repeat_switch(this)" /><br />
		
		
		
			
		</td>
		<td valign="top">
			<div id="event_repeat_0"></div>
			<div id="event_repeat_1">{ t_all_the }<input type="text" name="repeat_n_1" value="{ arr[repeat_n_1] }" size="4" maxlength="4" />{ t_days }</div>
			<div id="event_repeat_2">{ t_all_the }<input type="text" name="repeat_n_2" value="{ arr[repeat_n_2] }" size="4" maxlength="4" />{ t_weeks }<br />
				<label for="repeat_wd_0">{ t_sun }</label><input id="repeat_wd_0" type="checkbox" name="repeat_wd[]" value="0" { repeat_wd_checked[0] } />
				<label for="repeat_wd_1">{ t_mon }</label><input id="repeat_wd_1" type="checkbox" name="repeat_wd[]" value="1" { repeat_wd_checked[1] } />
				<label for="repeat_wd_2">{ t_tue }</label><input id="repeat_wd_2" type="checkbox" name="repeat_wd[]" value="2" { repeat_wd_checked[2] } />
				<label for="repeat_wd_3">{ t_wen }</label><input id="repeat_wd_3" type="checkbox" name="repeat_wd[]" value="3" { repeat_wd_checked[3] } />
				<label for="repeat_wd_4">{ t_thu }</label><input id="repeat_wd_4" type="checkbox" name="repeat_wd[]" value="4" { repeat_wd_checked[4] } />
				<label for="repeat_wd_5">{ t_fri }</label><input id="repeat_wd_5" type="checkbox" name="repeat_wd[]" value="5" { repeat_wd_checked[5] } />
				<label for="repeat_wd_6">{ t_sat }</label><input id="repeat_wd_6" type="checkbox" name="repeat_wd[]" value="6" { repeat_wd_checked[6] } />
			</div>
			<div id="event_repeat_3">{ t_all_the }<input type="text" name="repeat_n_3" value="{ arr[repeat_n_3] }" size="4" maxlength="4" />{ t_months }</div>
			<div id="event_repeat_4">{ t_all_the }<input type="text" name="repeat_n_4" value="{ arr[repeat_n_4] }" size="4" maxlength="4" />{ t_years }</div>
			&nbsp;
		</td>
	</tr>
	<tr id="repeat_enddate"> 
	<td align="right" nowrap valign="middle"><a class="BabEventFaqLink" href="javascript: Start('{ repeat_dateend }', 'CalendarWindow', 'width=250,height=250,status=no,resizable=no,top=200,left=200');">{ repeat_dateendtxt }</a>:</td>
	<td valign="middle"> 
		<select name="repeat_dayend">
		<!--#in getnextday -->
		<option value="{ dayid }" { selected }>{ dayid }</option>
		<!--#endin getnextday -->
		</select>

		<select name="repeat_monthend" onChange="updateDates(this.form.repeat_dayend, this.form.repeat_monthend, this.form.repeat_yearend);">
		<!--#in getnextmonth -->
		<option value="{ monthid }" { selected }>{ monthname }</option>
		<!--#endin getnextmonth -->
		</select>

		<select name="repeat_yearend" onChange="updateDates(this.form.repeat_dayend, this.form.repeat_monthend, this.form.repeat_yearend);">
		<!--#in getnextyear -->
		<option value="{ yearid }"  { selected }>{ yearidval }</option>
		<!--#endin getnextyear -->
		</select>

		<script type="text/javascript">
		<!--
		document.forms['vacform'].repeat.value = { repeat };
		document.getElementById('repeat_radio_'+document.forms['vacform'].repeat.value).checked = true;
		repeat_switch();
		repeat_checkbox(document.forms['vacform'].repeat_cb);
		daytypeswitch();

		//-->
		</script>

		</td>
	</tr>
	<tr> 
		<td align="right" valign="middle">{ title }:</td>
		<td> 
		<input type="text" name="title" size="45" maxlength="100" value="{ arr[title] }">
		</td>
	</tr>
	<tr> 
		<td align="right" valign="middle">{ location }:</td>
		<td> 
		<input type="text" name="location" size="45" maxlength="255" value="{ arr[location] }">
		</td>
	</tr>
	<!--#if rescat -->
	<tr> 
		<td align="right">{ category }:</td>
		<td> 
			<select name="category" onchange="category_switch(this)">
			<option value="" selected ></option>
			<!--#in getnextcat -->
			<option value="{ cat[id] }" { selected }>{ cat[name] }</option>
			<!--#endin getnextcat -->
			</select>
		</td>
	</tr>
	<!--#endif rescat -->
	<tr id="color_tr"> 
		<td align="right"><a href="javascript: Start('{ babUrlScript }?tg=selectcolor&idx=popup&callback=evtSetColor', 'ColorWindow', 'width=250,height=200,status=no,resizable=no,top=200,left=200');">{ t_color }</a>:</td>
		<td nowrap> 
			<div id="evtColor" style="width:30px;height:15px;border:#000 1px solid;background-color:#<!--#if colorvalue -->{ colorvalue }<!--#else colorvalue -->fff<!--#endif colorvalue -->;float:left"></div><input type="hidden" name="color" value="{ colorvalue }" />
			&nbsp;<a href="javascript:evtSetColor('')"><img src="{ babSkinPath }images/Puces/del.gif" alt="" border="0" /></a>
		</td>
	</tr>
	
	<tr> 
		<td colspan="2" align="center">
		
			<!--#if bprivate -->
			&nbsp;&nbsp;{ t_bprivate }: 
			<select name="bprivate">
				<!--#if arr[bprivate] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else arr[bprivate] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif arr[bprivate] -->
			</select>
			<!--#endif bprivate -->

			<!--#if block -->
			&nbsp;&nbsp;{ t_block }:
			<select name="block">
				<!--#if arr[block] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else arr[block] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif arr[block] -->
			</select>
			<!--#endif block -->

			<!--#if bfree -->
			&nbsp;&nbsp;{ t_bfree }:
			<select name="bfree">
				<!--#if arr[bfree] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else arr[bfree] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif arr[bfree] -->
			</select>
			<!--#endif bfree -->
		</td>
	</tr>
	<tr> 
<script language="JavaScript">
<!--
function ed()
{
var f = document.forms.vacform;
if (!f.creminder.checked)
	{
	f.rday.disabled = true;
	f.rhour.disabled = true;
	f.rminute.disabled = true;
<!--#if remailtxt -->
	f.remail.disabled = true;
<!--#endif remailtxt -->
	}
else
	{
	f.rday.disabled = false;
	f.rhour.disabled = false;
	f.rminute.disabled = false;
<!--#if remailtxt -->
	f.remail.disabled = false;
<!--#endif remailtxt -->
	}
}
//-->
</script>
		<td colspan="2" align="center">
		<input type="checkbox" name="creminder" value="Y" { rcheckedval }  OnClick="ed()" />&nbsp;<b>{ alerttxt }</b>&nbsp;<select name="rday">
<!--#in getnextreminderday -->
<option value="{ dval }" { dselected }>{ dname }</option>
<!--#endin getnextreminderday -->
</select>
&nbsp;
<select name="rhour">
<!--#in getnextreminderhour -->
<option value="{ hval }" { hselected }>{ hname }</option>
<!--#endin getnextreminderhour -->
</select>
&nbsp;
<select name="rminute">
<!--#in getnextreminderminute -->
<option value="{ mval }" { mselected }>{ mname }</option>
<!--#endin getnextreminderminute -->
</select>
<!--#if remailtxt -->
&nbsp;
<input type="checkbox" name="remail" value="Y" { rmcheckedval } />&nbsp;{ remailtxt } 
<!--#endif remailtxt -->


		</td>
	</tr>
	

	<tr>
		<td colspan="2">{ editor }</td>
	</tr>

	<tr id="event_owner">
		<td align="right">{ t_event_owner }</td>
		<td>
			<!--#if arr[event_owner] -->
			<input type="hidden" name="event_owner_post" value="{ arr[event_owner] }" />
			<!--#endif arr[event_owner] -->
			<select name="event_owner">
				<option value=""></option>
			</select>
		</td>
	</tr>

	<tr> 
		<td colspan="2">{ calendars }</td>
	</tr>
	</tbody>
	<tr>
		<td colspan="2" align="center"><input type="submit" name="Submit" value="{ addvac }" /></td>
	</tr>
	</table>
</td>
</tr>
</table>
</form>
<script type="text/javascript">
<!--
check_avariability();
ed();
-->
</script>
<!--#end newevent -->


<!--#begin modifyevent -->
<!--#if bshowupadetinfo -->
<table border="0" width="100%" cellpadding="1" cellspacing="0" align="center">
<tr>
<td align="center">{ modifiedontxt }:&nbsp;<b>{ updatedate }</b>&nbsp;{ bytxt }&nbsp;<b>{ updateauthor }</b>
</td>
</tr>
</table>
<!--#endif bshowupadetinfo -->
<form name="vacform" method="post" action="{ babPhpSelf }" onsubmit="return(submitCtrl(this,'vacform'))">
<input type="hidden" name="tg" value="event" />
<input type="hidden" name="idx" value="unload" />
<input type="hidden" name="date" value="{ curdate }" />
<input type="hidden" name="view" value="{ curview }" />
<input type="hidden" name="curcalids" value="{ ccids }" />
<input type="hidden" name="cci" value="{ ccids }" />
<input type="hidden" name="calid" value="{ calid }" />
<input type="hidden" name="evtid" value="{ evtid }" />
<input type="hidden" name="action" value="modifyevent" />
<input type="hidden" name="avariability" value="{ avariability }" />
<table class="BabLoginCadreBackground" width="80%" border="0" cellspacing="0" cellpadding="2" align="center">
<tr>
<td>
	<table class="BabLoginMenuBackground" width="100%" border="0" cellspacing="0" cellpadding="3">
	
	
	<tr id="avariability_check">
		<td colspan="2">{ avariability_message }<br />
		<ol>
			<!--#in getnextavariability -->
			<li>{ conflict }</li>
			<!--#endin getnextavariability -->
		</ol>
		<input type="submit" value="{ t_test_conflicts }" name="test_conflicts" /><br /><br />
		</td>
	</tr>
	
	<tbody id="main_form">
	<!--#if brecevt -->
	<tr> 
		<td colspan="2" align="center">{ updaterec }</td>
	</tr>
	<tr> 
		<td align="right">&nbsp;</td>
		<td colspan="2">
			<script type="text/javascript">
			<!--
			function bupdrec_onchange(obj)
				{
				var f = document.forms['vacform'];
				if (obj.value == 1)
					{
					f.daybegin.disabled = true;
					f.monthbegin.disabled = true;
					f.yearbegin.disabled = true;
					f.dayend.disabled = true;
					f.monthend.disabled = true;
					f.yearend.disabled = true;
					}
				else
					{
					f.daybegin.disabled = false;
					f.monthbegin.disabled = false;
					f.yearbegin.disabled = false;
					f.dayend.disabled = false;
					f.monthend.disabled = false;
					f.yearend.disabled = false;
					}
				}
			-->
			</script>
			<select name="bupdrec" onchange="bupdrec_onchange(this)">
				<!--#if bupdrec "== 2" -->
				<option value="1">{ all }</option>
				<option value="2" selected="selected">{ thisone }</option>
				<!--#else bupdrec -->
				<option value="1" selected="selected">{ all }</option>
				<option value="2">{ thisone }</option>
				<!--#endif bupdrec -->
			</select>
		</td>
	</tr>
	<!--#endif brecevt -->
	
	<tr> 
		<td align="right" nowrap width="25%" valign="middle"><a class="BabEventFaqLink" href="javascript: Start('{ datebegin }', 'CalendarWindow', 'width=250,height=250,status=no,resizable=no,top=200,left=200');">{ datebegintxt }</a>:</td>
		<td> 
			<select name="daybegin">
			<!--#in getnextday -->
			<option value="{ dayid }" { selected }>{ dayid }</option>
			<!--#endin getnextday -->
			</select>

			<select name="monthbegin" onChange="updateDates(this.form.daybegin, this.form.monthbegin, this.form.yearbegin);">
			<!--#in getnextmonth -->
			<option value="{ monthid }" { selected }>{ monthname }</option>
			<!--#endin getnextmonth -->
			</select>

			<select name="yearbegin" onChange="updateDates(this.form.daybegin, this.form.monthbegin, this.form.yearbegin);">
			<!--#in getnextyear -->
			<option value="{ yearid }"  { selected }>{ yearidval }</option>
			<!--#endin getnextyear -->
			</select>

			<select name="timebegin">
			<!--#in getnexttime -->
			<option value="{ timeval }" { selected }>{ time }</option>
			<!--#endin getnexttime -->
			</select >
		</td>
	</tr>
	<tr> 
		<td align="right" nowrap valign="middle"><a class="BabEventFaqLink" href="javascript: Start('{ dateend }', 'CalendarWindow', 'width=250,height=250,status=no,resizable=no,top=200,left=200');">{ 
		dateendtxt }</a>:</td>
		<td> 
			<select name="dayend">
			<!--#in getnextday -->
			<option value="{ dayid }" { selected }>{ dayid }</option>
			<!--#endin getnextday -->
			</select>

			<select name="monthend" onChange="updateDates(this.form.dayend, this.form.monthend, this.form.yearend);">
			<!--#in getnextmonth -->
			<option value="{ monthid }" { selected }>{ monthname }</option>
			<!--#endin getnextmonth -->
			</select>

			<select name="yearend" onChange="updateDates(this.form.dayend, this.form.monthend, this.form.yearend);">
			<!--#in getnextyear -->
			<option value="{ yearid }"  { selected }>{ yearidval }</option>
			<!--#endin getnextyear -->
			</select>

			<select name="timeend">
			<!--#in getnexttime -->
			<option value="{ timeval }" { selected }>{ time }</option>
			<!--#endin getnexttime -->
			</select >
		</td>
	</tr>
	
	<tr> 
		<td align="right">{ title }:</td>
		<td><input type="text" name="title" size="50" maxlength="255" value="{ evtarr[title] }" /></td>
	</tr>
	<tr> 
		<td align="right">{ location }:</td>
		<td><input type="text" name="location" size="50" maxlength="255" value="{ evtarr[location] }" /></td>
	</tr>
	
	<!--#if rescount -->
	<tr> 
		<td align="right">{ category }:</td>
		<td> 
			<select name="category" onchange="category_switch(this)">
			<option value="" selected ></option>
			<!--#in getnextcat -->
			<option value="{ catid }" { selected }>{ catname }</option>
			<!--#endin getnextcat -->
			</select>
		</td>
	</tr>
	<!--#endif rescount -->
	<tr id="color_tr"> 
		<td align="right"><a href="javascript: Start('{ babUrlScript }?tg=selectcolor&idx=popup&callback=evtSetColor', 'ColorWindow', 'width=250,height=200,status=no,resizable=no,top=200,left=200');">{ t_color }</a>:</td>
		<td><div id="evtColor" style="width:30px;height:15px;border:#000 1px solid;background-color:#{ colorvalue };float:left"></div><input type="hidden" name="color" value="{ colorvalue }" />
		&nbsp;<a href="javascript:evtSetColor('')"><img src="{ babSkinPath }images/Puces/del.gif" alt="" border="0" /></a>
		</td>
	</tr>

	<tr> 
		<td colspan="2" align="center">
		
		{ t_bprivate }:
			<select name="bprivate">
				<!--#if evtarr[bprivate] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else evtarr[bprivate] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif evtarr[bprivate] -->
			</select>

		 &nbsp;&nbsp; { t_block }:
		<select name="block">
				<!--#if evtarr[block] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else evtarr[block] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif evtarr[block] -->
			</select>

		 &nbsp;&nbsp; { t_bfree }:
		<select name="bfree">
				<!--#if evtarr[bfree] "== Y" -->
				<option value="Y" selected>{ t_yes }</option>
				<option value="N">{ t_no }</option>
				<!--#else evtarr[bfree] -->
				<option value="Y">{ t_yes }</option>
				<option value="N" selected>{ t_no }</option>
				<!--#endif evtarr[bfree] -->
			</select>
		</td>
	</tr>
	<tr> 
		<td colspan="2"><p align="center">{ description }:</p>
		{ editor }
		</td>
	</tr>
	<tr id="event_owner">
		<td align="right">{ t_event_owner }</td>
		<td>
			<!--#if evtarr[id_creator] -->
			<input type="hidden" name="event_owner_post" value="{ evtarr[id_creator] }" />
			<!--#endif evtarr[id_creator] -->
			<select name="event_owner">
				<option value=""></option>
			</select>
		</td>
	</tr>
	<tr> 
		<td colspan="2">{ calendars }</td>
	</tr>
	<tr> 
		<td colspan="2">&nbsp;</td>
	</tr>
	
	</tbody>
	
	<tr> 
		<td>&nbsp;</td>
		<td> 
			<input type="submit" name="Submit" value="{ modify }" />
			<!--#if bmodif -->
			&nbsp;&nbsp;<input type="submit" name="evtdel" value="{ delete }" />
			<!--#endif bmodif -->
			<br />
		</td>
	</tr>
	</table>
</td>
</tr>
</table>
</form>
<script type="text/javascript">
<!--
if (typeof bupdrec_onchange != 'undefined') {
	bupdrec_onchange(document.forms['vacform'].bupdrec);
}
check_avariability();
-->
</script>
<br />
<!--#end modifyevent -->



<!--#begin eventunload -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>{ babSiteName }</TITLE>
{ babMeta }
{ babCss }
<script type="text/javascript">
<!--
window.focus();
//-->
</script>

</HEAD>
<BODY onUnload="this.opener.location.reload()">
<br><br><br><br>

<table class="BabLoginMenuBackground" width="50%" border="0" cellspacing="0" cellpadding="2" align="center">
<tr> 
<td> 
<table class="" width="100%" border="0" cellspacing="0" cellpadding="5" align="center">
<tr> 
<td class="BabErrorMessage" colspan="2" align="center">{ message }</td>
</tr>
</table>
</td>
</tr>
</table>
<br>

<script type="text/javascript">
<!--
	setTimeout("this.close()","1000");
-->
</script>

</BODY>
</HTML>
<!--#end eventunload -->

<!--#begin scripts -->
<script language="JavaScript">
<!--
function repeat_switch(grp)
	{
	var v = grp ? grp.value : document.forms['vacform'].repeat.value ;
	var i=0;
	while(div = document.getElementById('event_repeat_'+i))
		{
		if (i == v)
			div.style.display = '';
		else
			div.style.display = 'none';
		i++;
		}
	}

function updateDates(elemDay, elemMonth, elemYear)
	{
	ds = elemDay.selectedIndex;
	timeA = new Date(elemYear.options[elemYear.selectedIndex].text, elemMonth.options[elemMonth.selectedIndex].value,1);
	timeDifference = timeA - 86400000;
	timeB = new Date(timeDifference);
	var daysInMonth = timeB.getDate();
	for (var i = 0; i < elemDay.length; i++)
	{
	elemDay.options[0] = null;
	}
	for (var i = 0; i < daysInMonth; i++)
	{
	elemDay.options[i] = new Option(i+1);
	}
	if( ds < daysInMonth )
	elemDay.options[ds].selected = true;
	else
	elemDay.options[daysInMonth-1].selected = true;
	}

function dateBegin(day, month, year)
{
	document.vacform.elements['monthbegin'].options[month-1].selected = true;
	document.vacform.elements['yearbegin'].options[year-{ yearmin }].selected = true;
	updateDates(document.vacform.elements['daybegin'], document.vacform.elements['monthbegin'], document.vacform.elements['yearbegin']);
	document.vacform.elements['daybegin'].options[day-1].selected = true;
}

function dateEnd(day, month, year)
{
	document.vacform.elements['monthend'].options[month-1].selected = true;
	document.vacform.elements['yearend'].options[year-{ yearmin }].selected = true;
	updateDates(document.vacform.elements['dayend'], document.vacform.elements['monthend'], document.vacform.elements['yearend']);
	document.vacform.elements['dayend'].options[day-1].selected = true;
}

function repeat_dateend(day, month, year)
{
	document.vacform.elements['repeat_monthend'].options[month-1].selected = true;
	document.vacform.elements['repeat_yearend'].options[year-{ yearmin }].selected = true;
	updateDates(document.vacform.elements['repeat_dayend'], document.vacform.elements['repeat_monthend'], document.vacform.elements['repeat_yearend']);
	document.vacform.elements['repeat_dayend'].options[day-1].selected = true;
}

function daytypeswitch()
{
var f = document.forms.vacform;
if (f.daytype.checked)
	{
	f.timebegin.disabled = true;
	f.timeend.disabled = true;
	}
else
	{
	f.timebegin.disabled = false;
	f.timeend.disabled = false;
	}
}

function category_switch(obj)
	{
	document.getElementById('color_tr').style.display  = obj.value != '' ? 'none' : '';
	}

function evtSetColor(color)
	{
	var f = document.forms['vacform'];
	f.color.value = color;
	if (color == '') color = 'fff';
	document.getElementById('evtColor').style.backgroundColor = '#'+color;
	}

function submitCtrl(form, name)
	{
	if (typeof calendarChoice_selectAll == 'function')
		{
		return calendarChoice_selectAll(name);
		}
	}

function check_avariability()
	{
	var f = document.forms['vacform'];
	var main_form = document.getElementById('main_form').style;
	var avariability_check = document.getElementById('avariability_check').style;

	if (f.avariability.value == 1)
		{
		//main_form.display='none';
		avariability_check.display='';
		}
	else
		{
		//main_form.display='';
		avariability_check.display='none';
		}
	}

function view_main_form()
	{
	document.forms['vacform'].avariability.value == 0;
	document.getElementById('main_form').style.display = '';
	}


function cal_movecalendar(action,text,value,classname)
	{
	var tr = document.getElementById('event_owner');
	var sel = document.forms['vacform'].event_owner;
	if (document.forms['vacform'].event_owner_post)
		{
		var post = document.forms['vacform'].event_owner_post;
		}

	if (action == 0 && classname == 'usr')
		{
		sel.options[sel.options.length] = new Option(text, value);
		if (post && post.value != '' && value == post.value)
			{
			sel.selectedIndex = sel.options.length - 1;
			}
		}
	else if (action == 1)
		{
		for (var i = 0 ; i < sel.options.length ; i++)
			{
			if (sel.options[i].value == value)
				{
				sel.options[i] = null;
				}
			}
		}

	if (sel.options.length > 1)
		{
		tr.style.display = '';
		}
	else
		{
		tr.style.display = 'none';
		}
	}


//-->
</script>
<!--#end scripts -->
